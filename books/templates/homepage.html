{% extends "base.html" %}
{% load static %}
{% block content %}

<!-- homepage.html content starts here -->

<!-- Title Banner -->
<div class="container-fluid title-banner">
    <div class="row w-100 remove-gutters">
        <div class="col-lg-12">
            <picture>
                <!-- Source for large screens -->
                <source media="(min-width: 600px)" srcset="{% static 'images/reading-in-cozy-library.png' %}">
                <!-- Source for small screens -->
                <img src="{% static 'images/man-reading-2.png' %}" alt="Banner Image" class="banner-image">
            </picture>
            <div class="banner-text-box">
                <h1>Welcome to Page Turner</h1>
                <p>Discover the latest books and explore new worlds</p>
                <a href="{% url 'books' %}" class="btn btn-primary">See all books</a>
            </div>
        </div>
    </div>
</div>

<!-- Display books -->
<div class="container-fluid">
    <div class="row">
        <div class="container mt-5">
            <h1 class="mb-4">Latest Books</h1>
            <!-- If there are no books to display -->
            {% if not book_list %}
                <p>No books available at the moment.</p>
            {% endif %}
            <div class="row book-grid">
                <!-- Create a card display for each book -->
                {% for book in book_list %}
                <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <a href="{% url 'book_detail' book.slug %}" class="book-link no-underline">
                                <div class="d-flex">
                                    <!-- Use a default book cover image if it has no cover image in the database -->
                                    <div class="image-container me-3">
                                        {% if book.cover_image.url == 'https://res.cloudinary.com/dxtaxsd1v/image/upload/placeholder' %}
                                        <img class="img-fluid" src="https://res.cloudinary.com/dxtaxsd1v/image/upload/v1718572431/em43nwjwng89xzrgfdvq.jpg" alt="placeholder Image" style="max-width: 100px;">
                                        {% else %}
                                        <img class="img-fluid" src="{{ book.cover_image.url }}" alt="{{ book.title }}" style="max-width: 100px;">
                                        {% endif %}
                                    </div>
                                    <!-- Display basic book details -->
                                    <div class="flex-grow-1">
                                        <h4 class="title mb-1">{{ book.title }}</h4>
                                        <p class="author mb-1">Author: {{ book.author }}</p>
                                        <p class="card-text text-muted h6 mb-0">Published in: {{ book.published_year }}</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- See all books button -->
            <div class="row">
                <div class="col-12 text-center mt-4">
                    <a href="{% url 'books' %}" class="btn btn-primary">See all books</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Newsletter Signup -->
<div class="container-fluid newsletter-signup py-5">
    <div class="row">
        <div class="col-12 text-center">
            <h2>Stay Updated!</h2>
            <p>Sign up for our newsletter to get the latest book releases, author events, and exclusive content straight to your inbox.</p>
            <form method="post" action="{% url 'homepage' %}" class="d-flex justify-content-center">
                {% csrf_token %}
                <input type="email" name="email" placeholder="Enter your email" required class="form-control me-2" style="max-width: 300px;">
                <button type="submit" class="btn btn-primary">Subscribe</button>
            </form>
        </div>
    </div>
</div>

{% endblock %}
